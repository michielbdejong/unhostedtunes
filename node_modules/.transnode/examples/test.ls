
tn = require '..'

console.log TransNode
TransNode = tn ".TransNode", (res) ->
	console.log "TransNode started", res

TransNode.on \close (res) ->
	console.log "TransNode was closed"

setTimeout ->
	#TransNode.add "magnet:?xt=urn:btih:64aa42d6d833e8086bd77b72ba595e9a4bae35c0&dn=NWA+-+Straight+Outta+Compton+%28Remastered%29-%28%28InfamousFlip.com%29%29&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A6969&tr=udp%3A%2F%2Ftracker.ccc.de%3A80", (obj) ->
	#	console.log "added!", &
	#TransNode.remove 1, true, (obj) ->
	#	console.log "removed", obj
	#TransNode.add "magnet:?xt=urn:btih:64aa42d6d833e8086bd77b72ba595e9a4bae35c0&dn=NWA+-+Straight+Outta+Compton+%28Remastered%29-%28%28InfamousFlip.com%29%29&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A6969&tr=udp%3A%2F%2Ftracker.ccc.de%3A80" , 3, (obj) ->
	TransNode.add "magnet:?xt=urn:btih:6f4d0cfa88d5192292519e7be14c8087d4544ec2&dn=Whitest+Boy+Alive+-+Rules+%282009%29+CD-rip+320+CBR&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A6969&tr=udp%3A%2F%2Ftracker.ccc.de%3A80" , 3, (obj) ->
		console.log "added!", obj
		#TransNode.stop 1, (obj) ->
		#	console.log "stopped", obj
, 400

TransNode.on \metadata (data) ->
	#console.log "dani's metadata", data
	console.log "metadata for:", data.name
	for f in data.files
		console.log "  (%d)", f.length, f.path.0

setTimeout ->
	setInterval ->
		TransNode.list (obj) ->
			console.log "torrents:", obj.torrents
	, 2000
, 5000

process.on \exit ->
	TransNode.stop 1
